<!DOCTYPE html>
<html>

  <head>
    <title>ResMap2</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Visualisation simple et facile des résultats de calculs de compensation de réseaux géodésiques">
    <meta name="keywords" content="resmap, ResMap, ResMapBD, LTOP, fichier PRNx, swisstopo">
    <link rel="icon" href="./img/logoAvecTitre.png" />

    <!----------- CSS  ----------->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="./css/style.css" rel="stylesheet">
    <link href="./css/popup.css" ref="stylesheet">
    <link href="./css/slider.css" ref="stylesheet">
    <link href="./css/helpButton.css" ref="stylesheet">
    <link href="./css/panel.css" rel="stylesheet">

    <!----------- OpenLayers -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.4.0/ol.css">


    <!-- ol-ext -->
    <!--<link rel="stylesheet" href="./css/ol-ext.css" />-->
  </head>


  <body>

    <div class="container-fluid">

      <div class="row align-items-start">

        <!-- Left: menu and drop-down menu -->
        <div class="col-3 border overflow-y-auto" id="menu">
          <div class="w3-center">
            <img src="./img/logoAvecTitre.png" class="imgLogo w3-center" alt="Logo de ResMap2">
          </div>

          <!-- Import .PRNx file -->
          <div class="mt-2 greyBackground border border-dark p-1">
            <h4 class="mx-2">Import du fichier .PRNx</h4>
            <input class="mx-2 my-1 pr-2 inputFile" type="file" style="font-size: 90%" id="inputfile" accept=".prnx" onchange="readFilePRNx()"></input>
            <p class="mx-2 my-1 importInfo" style="font-size: 80%" id="outputTest"> </p>
          </div>

          <!-- Abriss planimétrique -->
          <button onclick="myFunction('abrissPlanimetrique')" class="w3-button w3-block w3-left-align w3-blue-grey">Planimétrie</button>
          <div id="abrissPlanimetrique" class="w3-container w3-hide w3-border">
            <!-- All remove -->
            <!--<div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxAffich" onchange="changeLayerVisibility('plani_affich')">
              <label class="checkboxLabel" for="checkboxAffich" id="labelAffich">Tout supprimer</label>
            </div>-->
            
            <!-- Points fixes -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxPtsF" onchange="changeLayerVisibility('plani_ptsF')" checked>
              <label class="checkboxLabel" for="checkboxPtsF">
                Points fixes
              </label>
            </div>

            <!-- Points nouveaux -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxPtsN" onchange="changeLayerVisibility('plani_ptsN')" checked>
              <label class="checkboxLabel" for="checkboxPtsN">
                Points nouveaux
              </label>
            </div>

            <!-- Observations de directions -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxDir" onchange="changeLayerVisibility('plani_dir')">
              <label class="checkboxLabel" for="checkboxDir">
                Obs. Directions
              </label>
            </div>

            <!-- Observations de distances -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxDis" onchange="changeLayerVisibility('plani_dis')">
              <label class="checkboxLabel" for="checkboxDis">
                Obs. Distances
              </label>
            </div>

            <!-- Observations GNSS -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxGNSS" onchange="changeLayerVisibility('plani_GNSS')">
              <label class="checkboxLabel" for="checkboxGNSS">
                Obs. Session GNSS
              </label>
            </div>

            <!-- Observations de coordonnées E -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxCoordE" onchange="changeLayerVisibility('plani_coordE')">
              <label class="checkboxLabel" for="checkboxCoordE">
                Obs. coordonnée Est (axe Y)
              </label>
            </div>

            <!-- Observations de coordonnées N -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxCoordN" onchange="changeLayerVisibility('plani_coordN')">
              <label class="checkboxLabel" for="checkboxCoordN">
                Obs. coordonnée Nord (axe X)
              </label>
            </div>

            <!-- Ellipses de confiances -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxEll" onchange="changeLayerVisibility('plani_ell')">
              <label class="checkboxLabel" for="checkboxEll">
                Ellipses de confiance
              </label>
            </div>

            <!-- Ellipses de confiances relatives -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxEllRel" onchange="changeLayerVisibility('plani_ellRel')">
              <label class="checkboxLabel" for="checkboxEllRel">
                Ellipses de confiance relatives
              </label>
            </div>

            <!-- Rectangle de fiabilité -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxRect" onchange="changeLayerVisibility('plani_rect')">
              <label class="checkboxLabel" for="checkboxRect">
                Rectangles de fiabilité
              </label>
            </div>

            <!-- Rectangle de fiabilité -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxRectRel" onchange="changeLayerVisibility('plani_RectRel')">
              <label class="checkboxLabel" for="checkboxRectRel">
                Rectangles de fiabilité relatifs
              </label>
            </div>

            <!-- Fiabilité locale (zi) -->
            <div class="mt-2">
              <button class="accordion py-1">Fiabilité locale (zi)</button>
              <div class="panel">

                <!-- Zi : Directions -->
                <div>
                  <input class="form-check-input" type="checkbox" id="checkboxFiabLoc_Dir" onchange="changeLayerVisibility('plani_fiabLoc_dir')">
                  <label class="checkboxLabel" for="checkboxFiabLoc_Dir">
                    Directions
                  </label>
                </div>

                <!-- Zi : Distances -->
                <div>
                  <input class="form-check-input" type="checkbox" id="checkboxFiabLoc_Dis" onchange="changeLayerVisibility('plani_fiabLoc_dis')">
                  <label class="checkboxLabel" for="checkboxFiabLoc_Dis">
                    Distances
                  </label>
                </div>

                <!-- Zi : GNSS -->
                <div>
                  <input class="form-check-input" type="checkbox" id="checkboxFiabLoc_GNSS" onchange="changeLayerVisibility('plani_fiabLoc_GNSS')">
                  <label class="checkboxLabel" for="checkboxFiabLoc_GNSS">
                    Session GNSS
                  </label>
                </div>


              </div>
            </div>

            <!-- Résidus normés (wi) -->
            <div class="mt-2">
              <button class="accordion py-1">Résidus normés (wi)</button>
              <div class="panel">

                <!-- Wi : Directions -->
                <div>
                  <input class="form-check-input" type="checkbox" id="checkboxResi_Dir" onchange="changeLayerVisibility('plani_resi_dir')">
                  <label class="checkboxLabel" for="checkboxResi_Dir">
                    Directions
                  </label>
                </div>

                <!-- Wi : Distances -->
                <div>
                  <input class="form-check-input" type="checkbox" id="checkboxResi_Dis" onchange="changeLayerVisibility('plani_resi_dis')">
                  <label class="checkboxLabel" for="checkboxResi_Dis">
                    Distances
                  </label>
                </div>

                <!-- Wi : GNSS -->
                <div>
                  <input class="form-check-input" type="checkbox" id="checkboxResi_GNSS" onchange="changeLayerVisibility('plani_resi_GNSS')">
                  <label class="checkboxLabel" for="checkboxResi_GNSS">
                    Session GNSS
                  </label>
                </div>

              </div>
            </div>

            <!-- Vecteur de différence de coordonnées -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxVect" onchange="changeLayerVisibility('plani_vect')">
              <label class="checkboxLabel" for="checkboxVect">
                Vecteurs de déplacement
              </label>
            </div>

          </div>

          <!-- Abriss altimétrique -->
          <button onclick="myFunction('abrissAltimetrique')" class="w3-button w3-block w3-left-align w3-blue-grey">Altimétrie</button>
          <div id="abrissAltimetrique" class="w3-container w3-hide w3-border">
            <!-- Points fixes -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxPtsF_alti" onchange="changeLayerVisibility('alti_ptsF')">
              <label class="checkboxLabel" for="checkboxPtsF_alti">
                Points fixes
              </label>
            </div>

            <!-- Checkbox : Points nouveaux -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxPtsN_alti" onchange="changeLayerVisibility('alti_ptsN')">
              <label class="checkboxLabel" for="checkboxPtsN_alti">
                Points nouveaux
              </label>
            </div>

            <!-- Observation de type DH -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxDH_alti" onchange="changeLayerVisibility('alti_DH')">
              <label class="checkboxLabel" for="checkboxDH_alti">
                Obs. DH
              </label>
            </div>

            <!-- Observation GNSS -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxGNSS_alti" onchange="changeLayerVisibility('alti_GNSS')">
              <label class="checkboxLabel" for="checkboxGNSS_alti">
                Obs. GNSS
              </label>
            </div>

            <!-- Observation de coordonnée H -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxCoordH_alti" onchange="changeLayerVisibility('alti_coordH')">
              <label class="checkboxLabel" for="checkboxCoordH_alti">
                Obs. coordonnée H
              </label>
            </div>

            <!-- Ellipses de confiance -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxEll_alti" onchange="changeLayerVisibility('alti_ell')">
              <label class="checkboxLabel" for="checkboxEll_alti">
                Intervalle de confiance
              </label>
            </div>

            <!-- Ellipses de confiance relative -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxEllRel_alti" onchange="changeLayerVisibility('alti_ellRel')">
              <label class="checkboxLabel" for="checkboxEllRel_alti">
                Intervalles de confiance relatives
              </label>
            </div>

            <!-- Rectangle de fiabilité -->
            <div>
              <input class="form-check-input" type="checkbox" id="checkboxRect_alti" onchange="changeLayerVisibility('alti_rect')">
              <label class="checkboxLabel" for="checkboxRect_alti">
                Rectangles de fiabilité
              </label>
            </div>

            <!-- Rectangle de fiabilité relatif -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxRectRel_alti" onchange="changeLayerVisibility('alti_rectRel')">
              <label class="checkboxLabel" for="checkboxRectRel_alti">
                Rectangles de fiabilité relatifs
              </label>
            </div>

            <!-- Fiabilité locale (zi) -->
            <div class="mt-2">
              <button class="accordion py-1">Fiabilité locale (zi)</button>
              <div class="panel">

                <!-- Zi : DH -->
                <div>
                  <input class="form-check-input" type="checkbox" id="checkboxFiabLoc_DH_alti" onchange="changeLayerVisibility('alti_fiabLoc_DH')">
                  <label class="checkboxLabel" for="checkboxFiabLoc_DH_alti">
                    DH
                  </label>
                </div>

                <!-- Zi : GNSS -->
                <div>
                  <input class="form-check-input" type="checkbox" id="checkboxFiabLoc_GNSS_alti" onchange="changeLayerVisibility('alti_fiabLoc_GNSS')">
                  <label class="checkboxLabel" for="checkboxFiabLoc_GNSS_alti">
                    Session GNSS
                  </label>
                </div>
              
              </div>
            </div>

            <!-- Résidus normés (wi) -->
            <!-- Fiabilité locale (zi) -->
            <div class="mt-2">
              <button class="accordion py-1">Résidus normés (wi)</button>
              <div class="panel">
                
                <!-- DH -->
                <div class="w3-border-bottom">
                  <input class="form-check-input" type="checkbox" id="checkboxResi_DH_alti" onchange="changeLayerVisibility('alti_resi_DH')">
                  <label class="checkboxLabel" for="checkboxResi_DH_alti">
                    DH
                  </label>
                </div>

                <!-- GNSS -->
                <div class="w3-border-bottom">
                  <input class="form-check-input" type="checkbox" id="checkboxResi_GNSS_alti" onchange="changeLayerVisibility('alti_resi_GNSS')">
                  <label class="checkboxLabel" for="checkboxResi_GNSS_alti">
                    GNSS
                  </label>
                </div>
              
              </div>
            </div>

            <!-- Vecteur de déplacement -->
            <div class="w3-border-bottom">
              <input class="form-check-input" type="checkbox" id="checkboxVect_alti" onchange="changeLayerVisibility('alti_vect')">
              <label class="checkboxLabel" for="checkboxVect_alti">
                Vecteurs de déplacement
              </label>
            </div>

          </div>

          <!-- Slider pour l'échelle -->
          <div class="slidecontainer w3-border w3-center">
            <!-- TODO: disabled range tant que le fichier est pas importé-->
            <input type="range" min="0" max="15000" step="100" value="7000" class="form-range" id="myRange" style="">
            <div>
              <span class="textEchelle" id="textEchelle">Echelle → <span id="echelleValue"></span>:1</span>
              <div class="textEchelle" id="nivConfiance">Niveau de confiance des ellipses → <span id="nivConfianceValue"></span></div>
            </div>
          </div>

        </div>

        <!-- Right: map -->
        <div class="col">
          <div id="map">
          </div>
        </div>

      </div>

      <!-- Button for layers -->
      <div class="w3-dropdown-hover w3-right" id="layerSelection">
        <button class="w3-button" id="layerButton">
          <img id="imgLayers" src="./img/layers-svgrepo-com.png" alt="Selecting the background layer">
        </button>
        <div class="w3-dropdown-content w3-bar-block" style="right:0">
          <a class="w3-bar-item w3-button" onclick="changeBackground('CN')" >Carte Nationale</a>
          <a class="w3-bar-item w3-button" onclick="changeBackground('swissImage')">swissImage</a>
          <a class="w3-bar-item w3-button" onclick="changeBackground('swissSurface3D')">swissSurface3D</a>
          <a class="w3-bar-item w3-button" onclick="changeBackground('MO')">Mens. Off.</a>
          <a class="w3-bar-item w3-button" onclick="changeBackground('nothing')">-</a>
        </div>
      </div>

      <!-- Button for help -->
      <!--
      <div class="w3-button" id="help">
        <a href="./html/help.html" target="_blank">
          <img src="./img/help-svgrepo-com.png" alt="Click for help" id="imgHelp">
        </a>
      </div> -->

      <!---- Popup ---->
      <div id='popup'></div>
    </div>



    
    <!------ Javascript ------>
    <!---- JQeury / Bootstrap ---->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  
    <!---- OpenLayers / proj4 ---->
    <script src="https://cdn.jsdelivr.net/npm/ol@v7.4.0/dist/ol.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.js" integrity="sha512-cgJnZ1VX2G0MAN4C5OGShwI3zHhfQ6RLriXuukhblNu+T082/ZRGoWLP/0xMKObvB6AUKdnm27hQKj8hKZPjXA==" crossorigin="anonymous"></script>
  
    <!---- For popup ol ---->
    <script src="https://cdn.jsdelivr.net/npm/elm-pep@1.0.6/dist/elm-pep.js"></script>
    
    <!---- Personnals scripts -->
    <script src="js/index_accordion.js"></script>
    <script src="js/index_accordion2.js"></script>
    <script src="js/index_slider.js"></script>
    <script src="js/range.js"></script>
    <script src="js/gisement.js"></script>
    <script src="js/gisement2.js"></script>

    <script src="js/defineProj.js"></script>
    <script src="js/defineBackground.js"></script>
    <script src="js/defineView.js"></script>
    <script src="js/defineMap.js"></script>
    <script src="js/defineViewByFile.js"></script>
    <script src="js/defineLayers.js"></script>
    <script src="js/definePopup.js"></script>

    <script src="js/changeBackground.js"></script>
    <script src="js/changeLayerVisibility.js"></script>

    <script src="js/getParameterFeature_wi.js"></script>
    <script src="js/getParameterFeature_zi.js"></script>

    <script src="js/parseXML_points.js"></script>
    <script src="js/parseXML_variablePoints.js"></script>
    <script src="js/parseXML_planiObsPoints.js"></script>
    <script src="js/parseXML_altiObsPoints.js"></script>
    <script src="js/parseXML_planiObs.js"></script>
    
    <script src="js/affichPointsPlani.js"></script>
    <script src="js/affichPointsAlti.js"></script>

    <script src="js/affichMeasPlani.js"></script>
    <script src="js/affichMeasAlti.js"></script>
    
    <script src="js/affichPrecisionPlani.js"></script>
    <script src="js/affichPrecisionAlti.js"></script>
    
    <script src="js/affichRectanglesPlani.js"></script>
    <script src="js/affichRectangleAlti.js"></script>

    <script src="js/affichFiabLocPlani.js"></script>
    <script src="js/affichFiabLocAlti.js"></script>
    
    <script src="js/affichResiNormesPlani.js"></script>
    <script src="js/affichResiNormesAlti.js"></script>
    
    <script src="js/affichVecteurs.js"></script>
    <script src="js/affichVecteursAlti.js"></script>
    <!--<script src="./js/affichPopup.js"></script>-->

    <script src="js/affichPrecisionAltiRela.js"></script>
    <script src="js/affichRectangleAltiRela.js"></script>

    <script src="js/affichPrecisionPlaniRela.js"></script>
    <script src="js/affichRectanglePlaniRela.js"></script>

    <script src="js/readFilePRNx.js"></script>
    <script src="js/verifyErrors.js"></script>

    <script src="./js/main.js"></script>

  </body>
</html>

